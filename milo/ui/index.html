<!DOCTYPE html>

<head>
  <meta http-equiv="Content-Security-Policy" content="require-trusted-types-for 'script';">
  <!-- The tag manager to inject a GA4 tag with a proper measurement ID base on
    the host. This allows us to differentiate prod and staging/dev traffics.

    TODO: The current tag manager container is created under an account not
    linked to the Google corp organization. We should replace it with a
    container created under a corp organization associated account for better
    account ownership/ACL management. -->
  <!-- Google Tag Manager -->
  <script>
    const gtmJs = 'https://www.googletagmanager.com/gtm.js?id=GTM-5SMGXGB';
    const trustedGtmJs = self.trustedTypes
      ?.createPolicy('luci-ui-gtm-js', { createScriptURL: (_) => gtmJs })
      .createScriptURL('') || gtmJs;

    // The script is modified to support trusted types.
    (function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src = trustedGtmJs; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5SMGXGB');

    // A custom implementation of gtag.
    // See https://developers.google.com/tag-platform/tag-manager/datalayer#installation.
    function gtag() { dataLayer.push(arguments) };
  </script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8">
  <title>LUCI Milo</title>
  <link id="favicon" href="/src/common/assets/favicons/milo-32.png" rel="icon">
  <link href="/src/common/styles/style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">

  <script type="module" src="/src/main.tsx" defer></script>
  <style>
    #app-root {
      min-height: calc(100vh - 46px)
    }

    #footer {
      background-color: #f2f2f2;
      border-top: solid 1px #dadce0;
      display: flex;
      justify-content: end;
      gap: 15px;
      line-height: 15px;
      font-size: 14px;
      padding: 15px 15px;
      margin-top: auto;
    }

    #footer a {
      text-decoration: none;
      color: rgb(31, 31, 31);
    }
  </style>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SMGXGB" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoad()"></script>
  <script>
    // Load GAPI client.
    function gapiLoad() {
      gapi.load('client', function () {
        gapi.client.init({})
      })
    }
  </script>
  <div id="app-root"></div>
  <div id="footer">
    <div><a href="https://policies.google.com/privacy">Privacy</a></div>
    <div><a href="https://policies.google.com/terms">Terms</a></div>
  </div>
</body>